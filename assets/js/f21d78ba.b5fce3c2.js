"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[267],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>_});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),m=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=m(e.components);return r.createElement(s.Provider,{value:n},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=m(t),d=a,_=c["".concat(s,".").concat(d)]||c[d]||p[d]||i;return t?r.createElement(_,o(o({ref:n},u),{},{components:t})):r.createElement(_,o({ref:n},u))}));function _(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[c]="string"==typeof e?e:a,o[1]=l;for(var m=2;m<i;m++)o[m]=t[m];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},408:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=t(7462),a=(t(7294),t(3905));const i={title:"Installation guide"},o=void 0,l={type:"mdx",permalink:"/documents/installation-guide",source:"@site/src/pages/installation-guide.md",title:"Installation guide",description:"Installation guide",frontMatter:{title:"Installation guide"}},s=[{value:"Installation guide",id:"installation-guide",level:2},{value:"Tools",id:"tools",level:2},{value:"Where Can I Find the Code?",id:"where-can-i-find-the-code",level:2},{value:"Tyle",id:"tyle",level:3},{value:"Mimir",id:"mimir",level:3},{value:"Component-library",id:"component-library",level:3},{value:"How Do I Install the Code on My Machine?",id:"how-do-i-install-the-code-on-my-machine",level:2},{value:"Manual Installation",id:"manual-installation",level:3},{value:"Automatisk installasjon",id:"automatisk-installasjon",level:3},{value:"Mimir frontend og Yalc",id:"mimir-frontend-og-yalc",level:2},{value:"Docker compose filer",id:"docker-compose-filer",level:2},{value:"Compose fil for hele l\xf8sningen",id:"compose-fil-for-hele-l\xf8sningen",level:3},{value:"Compose fil for tyle",id:"compose-fil-for-tyle",level:3},{value:"Compose fil for mimir",id:"compose-fil-for-mimir",level:3},{value:"Etter installasjon",id:"etter-installasjon",level:2},{value:"Lag en bruker",id:"lag-en-bruker",level:3},{value:"FAQ",id:"faq",level:2}],m={toc:s},u="wrapper";function c(e){let{components:n,...t}=e;return(0,a.kt)(u,(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"installation-guide"},"Installation guide"),(0,a.kt)("p",null,"Tyle and Mimir have a very large and complex domain, which is not always easy to understand. Therefore, there's no shame\nin asking for help. This is a minimalist, almost \"installation guide\" for the code. It won't go into great depth, as\nthat's something best discussed face-to-face, but it's intended as a sort of \"Here's how you hopefully run the code.\""),(0,a.kt)("h2",{id:"tools"},"Tools"),(0,a.kt)("p",null,"The team uses the tools they are most comfortable with, but here are some examples:\nFrontend code:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"VSCode"),(0,a.kt)("li",{parentName:"ul"},"WebStorm")),(0,a.kt)("p",null,"Backend code:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Visual Studio + Resharper"),(0,a.kt)("li",{parentName:"ul"},"Rider (Resharper is built-in)")),(0,a.kt)("p",null,"Other tools:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Git"),(0,a.kt)("li",{parentName:"ul"},"Docker"),(0,a.kt)("li",{parentName:"ul"},"Datagrip (database management)"),(0,a.kt)("li",{parentName:"ul"},"SQL Server Management Studio")),(0,a.kt)("p",null,"Of these, you ",(0,a.kt)("strong",{parentName:"p"},"must")," install Docker or equivalent to run the MSSQL database."),(0,a.kt)("p",null,"Furthermore, you need to log into the Equinor system to acquire a Docker license. This can be done\nat ",(0,a.kt)("a",{parentName:"p",href:"https://connectit.equinor.com/"},"https://connectit.equinor.com/"),". Then, go to ",(0,a.kt)("a",{parentName:"p",href:"https://accessit.equinor.com"},"https://accessit.equinor.com")," through a browser via ConnectIT. You must\nalso request access to Outlook and your own email to achieve this, plus the developer course that you must take once a\nyear."),(0,a.kt)("h2",{id:"where-can-i-find-the-code"},"Where Can I Find the Code?"),(0,a.kt)("p",null,"The code for Mimir can be found here ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/mimir-org"},"https://github.com/mimir-org")," under the Mimir repository. The project can be cloned\nto your machine with ",(0,a.kt)("inlineCode",{parentName:"p"},"git@github.com:mimir-org/mimir.git")," via SSH or ",(0,a.kt)("inlineCode",{parentName:"p"},"gh repo clone mimir-org/mimir"),"\nwith ",(0,a.kt)("a",{parentName:"p",href:"https://cli.github.com/"},"GitHub CLI"),"."),(0,a.kt)("h3",{id:"tyle"},"Tyle"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:mimir-org/typelibrary.git\n")),(0,a.kt)("h3",{id:"mimir"},"Mimir"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:mimir-org/mimir.git\n")),(0,a.kt)("h3",{id:"component-library"},"Component-library"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:mimir-org/component-library.git\n")),(0,a.kt)("h2",{id:"how-do-i-install-the-code-on-my-machine"},"How Do I Install the Code on My Machine?"),(0,a.kt)("p",null,"For Mimir to function, you need to have all the code on your machine. This can be done in several different ways."),(0,a.kt)("h3",{id:"manual-installation"},"Manual Installation"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Start an MSSQL database running on port 1433 locally on your machine using Docker (or equivalent)."),(0,a.kt)("li",{parentName:"ol"},"Clone all the repositories under mimir-org (typelibrary, mimir, and component-library) and run them following the instructions in the ReadMe files of the different repositories. It might be wise to run the different projects in this order, at least the first time:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Tyle backend"),(0,a.kt)("li",{parentName:"ul"},"Tyle frontend"),(0,a.kt)("li",{parentName:"ul"},"Mimir backend"),(0,a.kt)("li",{parentName:"ul"},"Mimir frontend"))),(0,a.kt)("li",{parentName:"ol"},"After installation, you must add the following env file:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"/mimir/src/service/ModelBuilder.Api/appsettings.local.json"))))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"appsettings.local.json"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "ApplicationSetting": {\n    "TypeLibraryRootUri": "http://localhost:5001/",\n    "TypeLibraryVersion": "v1",\n    "TypeLibrarySecret": "cedf6a1af9917f6ac2fd8f7a0f4610b418a72c4ac9557cf2256e4ec2226b2060",\n    "TypeLibraryDomain": "runir.net"\n  },\n  "Logging": {\n    "LogLevel": {\n      "Default": "Error",\n      "Microsoft": "Warning",\n      "Microsoft.Hosting.Lifetime": "Warning",\n      "Microsoft.EntityFrameworkCore.Database.Command": "Warning",\n      "Mb.Services": "Information",\n      "EventHubModule": "Error"\n    },\n    "Console": {\n      "IncludeScopes": true,\n      "LogLevel": {\n        "Default": "Error",\n        "Microsoft": "Warning",\n        "Microsoft.Hosting.Lifetime": "Warning",\n        "Microsoft.EntityFrameworkCore.Database.Command": "Warning",\n        "Mb.Services": "Information",\n        "EventHubModule": "Error"\n      }\n    }\n  },\n  "AllowedHosts": "*",\n  "AzureActiveDirectoryConfiguration": {\n    "Instance": "https://login.microsoftonline.com/",\n    "TenantId": "3aa4a235-b6e2-48d5-9195-7fcf05b459b0",\n    "ClientId": "2967244a-662f-4462-82bd-7f9bca0a3683",\n    "ClientSecret": null,\n    "CallbackPath": "/signin-oidc",\n    "SignedOutCallbackPath": "/signout-oidc",\n    "Silent": true\n  },\n  "CorsConfiguration": {\n    "ValidOrigins": "http://localhost:3000"\n  },\n  "DatabaseConfiguration": {\n    "DataSource": "127.0.0.1",\n    "Port": 1433,\n    "InitialCatalog": "ModelBuilder",\n    "DbUser": "sa",\n    "Password": "P4ssw0rd1",\n    "Timeout": 150,\n    "ConnectRetryCount": 15,\n    "ConnectRetryInterval": 10\n  }\n}\n'))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Der er andre .env filer i frontendkoden, men for det meste slipper du \xe5 bry deg om dette. Det mest interessante her\ner nok ",(0,a.kt)("strong",{parentName:"li"},"silent")," mode. Denne b\xf8r nok v\xe6re ",(0,a.kt)("em",{parentName:"li"},"true")," n\xe5r du driver med utvikling lokalt, da denne modusen ignorerer en\ndel autentisering. L\xf8sningen vil nok mest sannsynlig kr\xe6sje uten, noe som f\xf8rer til hvit skjerm p\xe5 frontendsiden.")),(0,a.kt)("h3",{id:"automatisk-installasjon"},"Automatisk installasjon"),(0,a.kt)("p",null,"Spinn opp all koden med en docker-compose fil."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Installer ",(0,a.kt)("a",{parentName:"li",href:"https://www.docker.com/"},"docker")),(0,a.kt)("li",{parentName:"ol"},"Finn et sted \xe5 laste ned koden til slik at du f\xe5r denne mappestrukturen:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 mimirorg (denne kan renames til det du vil)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 component-library",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 etc"))),(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 mimir",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 etc"))),(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 typelibrary",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 etc"))))))),(0,a.kt)("li",{parentName:"ol"},"Lag en ny .yaml fil og lim inn f\xf8lgende kode.")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"docker-compose.yaml"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"version: \"3.8\"\n\nservices:\n\n  tyle-client:\n    build: ./typelibrary/src/client\n    hostname: 'tyleclient'\n    container_name: tyleclient\n    ports:\n      - \"3001:80\"\n    environment:\n      - TYPELIBRARY_ENV_API_BASE_URL=http://localhost:5001/v1.0/\n    networks:\n      - type_library_network\n\n  mimir-client:\n    build:\n      context: ./mimir/src/client\n      args:\n        - MIMIR_VERSION=4.0.0\n    hostname: 'mimirclient'\n    container_name: mimirclient\n    ports:\n      - \"3000:80\"\n    environment:\n      - MIMIR_ENV_API_BASE_URL=http://localhost:5000/v1.0/\n      - MIMIR_ENV_SOCKET_BASE_URL=http://localhost:5000/\n      - MIMIR_ENV_SILENT=true\n      - MIMIR_ENV_APP_ID=2967244a-662f-4462-82bd-7f9bca0a3683\n      - MIMIR_ENV_CLIENT_ID=0c174c7e-e018-41a2-ba84-3d4b4544a16f\n      - MIMIR_ENV_TENANT_ID=3aa4a235-b6e2-48d5-9195-7fcf05b459b0\n    networks:\n      - type_library_network\n\n  tyle-server:\n    build: ./typelibrary/src/server\n    hostname: 'tyleserver'\n    container_name: tyleserver\n    ports:\n      - \"5001:80\"\n    volumes:\n      - tyle:/app/Data\n    environment:\n      - ASPNETCORE_ENVIRONMENT=Development\n      - DatabaseConfiguration__DataSource=mssql\n      - DatabaseConfiguration__Port=1433\n      - DatabaseConfiguration__InitialCatalog=TypeLibrary\n      - DatabaseConfiguration__DbUser=sa\n      - DatabaseConfiguration__Password=P4ssw0rd1\n      - MimirorgAuthSettings__ApplicationName=Tyle\n      - MimirorgAuthSettings__ApplicationUrl=http://localhost:5001\n      - MimirorgAuthSettings__RequireConfirmedAccount=true\n      - MimirorgAuthSettings__Email=noreply@runir.net\n      - MimirorgAuthSettings__DatabaseConfiguration__DataSource=mssql\n      - MimirorgAuthSettings__DatabaseConfiguration__Port=1433\n      - MimirorgAuthSettings__DatabaseConfiguration__InitialCatalog=MimirorgAuthentication\n      - MimirorgAuthSettings__DatabaseConfiguration__DbUser=sa\n      - MimirorgAuthSettings__DatabaseConfiguration__Password=P4ssw0rd1\n      - ApplicationSettings__ApplicationSemanticUrl=http://localhost:5001/v1/ont\n      - ApplicationSettings__ApplicationUrl=http://localhost:5001\n      - CorsConfiguration__ValidOrigins=http://localhost:3001\n    networks:\n      - type_library_network\n    depends_on:\n      - mssql\n\n  mimir-server:\n    build: ./mimir/src/service\n    hostname: 'mimirserver'\n    container_name: mimirserver\n    ports:\n      - \"5000:80\"\n    environment:\n      - ASPNETCORE_ENVIRONMENT=Development\n      - DatabaseConfiguration__DataSource=mssql\n      - DatabaseConfiguration__Port=1433\n      - DatabaseConfiguration__InitialCatalog=ModelBuilder\n      - DatabaseConfiguration__DbUser=sa\n      - DatabaseConfiguration__Password=P4ssw0rd1\n      - DatabaseConfiguration__Timeout=150\n      - DatabaseConfiguration__ConnectRetryCount=15\n      - DatabaseConfiguration__ConnectRetryInterval=10\n      - AzureActiveDirectoryConfiguration__TenantId=3aa4a235-b6e2-48d5-9195-7fcf05b459b0\n      - AzureActiveDirectoryConfiguration__ClientId=2967244a-662f-4462-82bd-7f9bca0a3683\n      - AzureActiveDirectoryConfiguration__Silent=true\n      - CorsConfiguration__ValidOrigins=http://localhost:3000\n      - ApplicationSetting__TypeLibraryRootUri=http://tyleserver/\n      - ApplicationSetting__TypeLibraryVersion=v1\n      - ApplicationSetting__TypeLibrarySecret=cedf6a1af9917f6ac2fd8f7a0f4610b418a72c4ac9557cf2256e4ec2226b2060\n      - ApplicationSetting__TypeLibraryDomain=runir.net\n    networks:\n      - type_library_network\n    depends_on:\n      - mssql\n\n  mssql:\n    image: \"mcr.microsoft.com/mssql/server:2017-CU8-ubuntu\"\n    hostname: 'mssql'\n    container_name: mssql\n    ports:\n      - '127.0.0.1:1433:1433'\n    volumes:\n      - mssql:/var/opt/mssql\n    environment:\n      - ACCEPT_EULA=Y\n      - MSSQL_SA_PASSWORD=P4ssw0rd1\n      - MSSQL_PID=Standard\n    networks:\n      - type_library_network\n    restart: unless-stopped\n\nvolumes:\n  mssql:\n    driver: local\n  tyle:\n    driver: local\n\nnetworks:\n  type_library_network:\n    driver: bridge\n"))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Plasser denne yaml filen som vist under:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 mimirorg (denne kan renames til det du vil)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udc0b docker-compose.yaml"),(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 component-library",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 etc"))),(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 mimir",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 etc"))),(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 typelibrary",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud83d\udcc1 etc"))))))),(0,a.kt)("li",{parentName:"ol"},"Deretter kj\xf8rer du docker compose filen fra kommandolinjen.\n",(0,a.kt)("inlineCode",{parentName:"li"},"docker-compose up -d")," fra mappen der filen ligger."),(0,a.kt)("li",{parentName:"ol"},"N\xe5r alt er oppe \xe5 kj\xf8rer s\xe5 skal du f\xe5 opp de forskjellige sidene p\xe5:\nhttp://localhost:3000\nhttp://localhost:3001\nhttp://localhost:5000\nhttp://localhost:5001"),(0,a.kt)("li",{parentName:"ol"},"For \xe5 kj\xf8re desse lokalt s\xe5 er du n\xf8dt til \xe5 stoppe containeren som du har lyst til \xe5 kj\xf8re lokalt i eksempelvis\nVisual Studio.")),(0,a.kt)("h2",{id:"mimir-frontend-og-yalc"},"Mimir frontend og Yalc"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/wclr/yalc"},"https://github.com/wclr/yalc")),(0,a.kt)("p",null,"Yalc er en m\xe5te \xe5 koble npm pakkeutvikling sammen med dev milj\xf8. Det gj\xf8r det mulig for oss \xe5 utvikle komponenter i\ncomponent-library og dynamisk oppdatere disse lokalt slik at man slipper \xe5 lansere en ny pakke p\xe5 npm for hver endring\nav kode."),(0,a.kt)("p",null,"installer yalc med\n",(0,a.kt)("inlineCode",{parentName:"p"},"npm i yalc -g")),(0,a.kt)("p",null,"Deretter er du klar til \xe5 bruke det."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Naviger til ",(0,a.kt)("inlineCode",{parentName:"li"},"component-library/app mappen")),(0,a.kt)("li",{parentName:"ul"},"Kj\xf8r kommandoen ",(0,a.kt)("inlineCode",{parentName:"li"},"yalc publish")),(0,a.kt)("li",{parentName:"ul"},"Naviger til ",(0,a.kt)("inlineCode",{parentName:"li"},"/mimirorg/mimir/src/client")),(0,a.kt)("li",{parentName:"ul"},"Kj\xf8r kommandoen ",(0,a.kt)("inlineCode",{parentName:"li"},"yalc add @mimirorg/component-library")),(0,a.kt)("li",{parentName:"ul"},"N\xe5 kan du kj\xf8re mimir som normalt ved \xe5 f\xf8rst installere pakkene ",(0,a.kt)("inlineCode",{parentName:"li"},"npm i")," for s\xe5 \xe5 kj\xf8re det lokalt med ",(0,a.kt)("inlineCode",{parentName:"li"},"npm run start"),"\neller ",(0,a.kt)("inlineCode",{parentName:"li"},"npm run"),".")),(0,a.kt)("h2",{id:"docker-compose-filer"},"Docker compose filer"),(0,a.kt)("p",null,"Av og til er det nyttig \xe5 kj\xf8re tyle eller mimir separat for \xe5 slippe \xe5 ha flere Visual Studio instanser kj\xf8rende\nsamtidig. Da kan disse filene vere nyttige \xe5 ha."),(0,a.kt)("h3",{id:"compose-fil-for-hele-l\xf8sningen"},"Compose fil for hele l\xf8sningen"),(0,a.kt)("details",null,(0,a.kt)("summary",null,"docker-compose.yaml"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"version: \"3.8\"\n\nservices:\n\n  tyle-client:\n    build: ./typelibrary/src/client\n    hostname: 'tyleclient'\n    container_name: tyleclient\n    ports:\n      - \"3001:80\"\n    environment:\n      - TYPELIBRARY_ENV_API_BASE_URL=http://localhost:5001/v1.0/\n    networks:\n      - type_library_network\n\n  mimir-client:\n    build:\n      context: ./mimir/src/client\n      args:\n        - MIMIR_VERSION=4.0.0\n    hostname: 'mimirclient'\n    container_name: mimirclient\n    ports:\n      - \"3000:80\"\n    environment:\n      - MIMIR_ENV_API_BASE_URL=http://localhost:5000/v1.0/\n      - MIMIR_ENV_SOCKET_BASE_URL=http://localhost:5000/\n      - MIMIR_ENV_SILENT=true\n      - MIMIR_ENV_APP_ID=2967244a-662f-4462-82bd-7f9bca0a3683\n      - MIMIR_ENV_CLIENT_ID=0c174c7e-e018-41a2-ba84-3d4b4544a16f\n      - MIMIR_ENV_TENANT_ID=3aa4a235-b6e2-48d5-9195-7fcf05b459b0\n    networks:\n      - type_library_network\n\n  tyle-server:\n    build: ./typelibrary/src/server\n    hostname: 'tyleserver'\n    container_name: tyleserver\n    ports:\n      - \"5001:80\"\n    volumes:\n      - tyle:/app/Data\n    environment:\n      - ASPNETCORE_ENVIRONMENT=Development\n      - DatabaseConfiguration__DataSource=mssql\n      - DatabaseConfiguration__Port=1433\n      - DatabaseConfiguration__InitialCatalog=TypeLibrary\n      - DatabaseConfiguration__DbUser=sa\n      - DatabaseConfiguration__Password=P4ssw0rd1\n      - MimirorgAuthSettings__ApplicationName=Tyle\n      - MimirorgAuthSettings__ApplicationUrl=http://localhost:5001\n      - MimirorgAuthSettings__RequireConfirmedAccount=true\n      - MimirorgAuthSettings__Email=noreply@runir.net\n      - MimirorgAuthSettings__DatabaseConfiguration__DataSource=mssql\n      - MimirorgAuthSettings__DatabaseConfiguration__Port=1433\n      - MimirorgAuthSettings__DatabaseConfiguration__InitialCatalog=MimirorgAuthentication\n      - MimirorgAuthSettings__DatabaseConfiguration__DbUser=sa\n      - MimirorgAuthSettings__DatabaseConfiguration__Password=P4ssw0rd1\n      - ApplicationSettings__ApplicationSemanticUrl=http://localhost:5001/v1/ont\n      - ApplicationSettings__ApplicationUrl=http://localhost:5001\n      - CorsConfiguration__ValidOrigins=http://localhost:3001\n    networks:\n      - type_library_network\n    depends_on:\n      - mssql\n\n  mimir-server:\n    build: ./mimir/src/service\n    hostname: 'mimirserver'\n    container_name: mimirserver\n    ports:\n      - \"5000:80\"\n    environment:\n      - ASPNETCORE_ENVIRONMENT=Development\n      - DatabaseConfiguration__DataSource=mssql\n      - DatabaseConfiguration__Port=1433\n      - DatabaseConfiguration__InitialCatalog=ModelBuilder\n      - DatabaseConfiguration__DbUser=sa\n      - DatabaseConfiguration__Password=P4ssw0rd1\n      - DatabaseConfiguration__Timeout=150\n      - DatabaseConfiguration__ConnectRetryCount=15\n      - DatabaseConfiguration__ConnectRetryInterval=10\n      - AzureActiveDirectoryConfiguration__TenantId=3aa4a235-b6e2-48d5-9195-7fcf05b459b0\n      - AzureActiveDirectoryConfiguration__ClientId=2967244a-662f-4462-82bd-7f9bca0a3683\n      - AzureActiveDirectoryConfiguration__Silent=true\n      - CorsConfiguration__ValidOrigins=http://localhost:3000\n      - ApplicationSetting__TypeLibraryRootUri=http://tyleserver/\n      - ApplicationSetting__TypeLibraryVersion=v1\n      - ApplicationSetting__TypeLibrarySecret=cedf6a1af9917f6ac2fd8f7a0f4610b418a72c4ac9557cf2256e4ec2226b2060\n      - ApplicationSetting__TypeLibraryDomain=runir.net\n    networks:\n      - type_library_network\n    depends_on:\n      - mssql\n\n  mssql:\n    image: \"mcr.microsoft.com/mssql/server:2017-CU8-ubuntu\"\n    hostname: 'mssql'\n    container_name: mssql\n    ports:\n      - '127.0.0.1:1433:1433'\n    volumes:\n      - mssql:/var/opt/mssql\n    environment:\n      - ACCEPT_EULA=Y\n      - MSSQL_SA_PASSWORD=P4ssw0rd1\n      - MSSQL_PID=Standard\n    networks:\n      - type_library_network\n    restart: unless-stopped\n\nvolumes:\n  mssql:\n    driver: local\n  tyle:\n    driver: local\n\nnetworks:\n  type_library_network:\n    driver: bridge\n\n"))),(0,a.kt)("h3",{id:"compose-fil-for-tyle"},"Compose fil for tyle"),(0,a.kt)("details",null,(0,a.kt)("summary",null,"docker-compose.yaml"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"version: \"3.8\"\n\nservices:\n\n  tyle-client:\n    build: ./typelibrary/src/client\n    hostname: 'tyleclient'\n    container_name: tyleclient\n    ports:\n      - \"3001:80\"\n    environment:\n      - TYPELIBRARY_ENV_API_BASE_URL=http://localhost:5001/v1.0/\n    networks:\n      - type_library_network\n\n  tyle-server:\n    build: ./typelibrary/src/server\n    hostname: 'tyleserver'\n    container_name: tyleserver\n    ports:\n      - \"5001:80\"\n    volumes:\n      - tyle:/app/Data\n    environment:\n      - ASPNETCORE_ENVIRONMENT=Development\n      - DatabaseConfiguration__DataSource=mssql\n      - DatabaseConfiguration__Port=1433\n      - DatabaseConfiguration__InitialCatalog=TypeLibrary\n      - DatabaseConfiguration__DbUser=sa\n      - DatabaseConfiguration__Password=P4ssw0rd1\n      - MimirorgAuthSettings__ApplicationName=Tyle\n      - MimirorgAuthSettings__ApplicationUrl=http://localhost:5001\n      - MimirorgAuthSettings__RequireConfirmedAccount=true\n      - MimirorgAuthSettings__Email=noreply@runir.net\n      - MimirorgAuthSettings__DatabaseConfiguration__DataSource=mssql\n      - MimirorgAuthSettings__DatabaseConfiguration__Port=1433\n      - MimirorgAuthSettings__DatabaseConfiguration__InitialCatalog=MimirorgAuthentication\n      - MimirorgAuthSettings__DatabaseConfiguration__DbUser=sa\n      - MimirorgAuthSettings__DatabaseConfiguration__Password=P4ssw0rd1\n      - ApplicationSettings__ApplicationSemanticUrl=http://localhost:5001/v1/ont\n      - ApplicationSettings__ApplicationUrl=http://localhost:5001\n      - CorsConfiguration__ValidOrigins=http://localhost:3001\n    networks:\n      - type_library_network\n    depends_on:\n      - mssql\n\n  mssql:\n    image: \"mcr.microsoft.com/mssql/server:2017-CU8-ubuntu\"\n    hostname: 'mssql'\n    container_name: mssql\n    ports:\n      - '127.0.0.1:1433:1433'\n    volumes:\n      - mssql:/var/opt/mssql\n    environment:\n      - ACCEPT_EULA=Y\n      - MSSQL_SA_PASSWORD=P4ssw0rd1\n      - MSSQL_PID=Standard\n    networks:\n      - type_library_network\n    restart: unless-stopped\n\nvolumes:\n  mssql:\n    driver: local\n  tyle:\n    driver: local\n\nnetworks:\n  type_library_network:\n    driver: bridge\n"))),(0,a.kt)("h3",{id:"compose-fil-for-mimir"},"Compose fil for mimir"),(0,a.kt)("details",null,(0,a.kt)("summary",null,"docker-compose.yaml"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"version: \"3.8\"\n\nservices:\n\n  mimir-client:\n    build:\n      context: ./mimir/src/client\n      args:\n        - MIMIR_VERSION=4.0.0\n    hostname: 'mimirclient'\n    container_name: mimirclient\n    ports:\n      - \"3000:80\"\n    environment:\n      - MIMIR_ENV_API_BASE_URL=http://localhost:5000/v1.0/\n      - MIMIR_ENV_SOCKET_BASE_URL=http://localhost:5000/\n      - MIMIR_ENV_SILENT=true\n      - MIMIR_ENV_APP_ID=2967244a-662f-4462-82bd-7f9bca0a3683\n      - MIMIR_ENV_CLIENT_ID=0c174c7e-e018-41a2-ba84-3d4b4544a16f\n      - MIMIR_ENV_TENANT_ID=3aa4a235-b6e2-48d5-9195-7fcf05b459b0\n    networks:\n      - type_library_network\n\n  mimir-server:\n    build: ./mimir/src/service\n    hostname: 'mimirserver'\n    container_name: mimirserver\n    ports:\n      - \"5000:80\"\n    environment:\n      - ASPNETCORE_ENVIRONMENT=Development\n      - DatabaseConfiguration__DataSource=mssql\n      - DatabaseConfiguration__Port=1433\n      - DatabaseConfiguration__InitialCatalog=ModelBuilder\n      - DatabaseConfiguration__DbUser=sa\n      - DatabaseConfiguration__Password=P4ssw0rd1\n      - DatabaseConfiguration__Timeout=150\n      - DatabaseConfiguration__ConnectRetryCount=15\n      - DatabaseConfiguration__ConnectRetryInterval=10\n      - AzureActiveDirectoryConfiguration__TenantId=3aa4a235-b6e2-48d5-9195-7fcf05b459b0\n      - AzureActiveDirectoryConfiguration__ClientId=2967244a-662f-4462-82bd-7f9bca0a3683\n      - AzureActiveDirectoryConfiguration__Silent=true\n      - CorsConfiguration__ValidOrigins=http://localhost:3000\n      - ApplicationSetting__TypeLibraryRootUri=http://tyleserver/\n      - ApplicationSetting__TypeLibraryVersion=v1\n      - ApplicationSetting__TypeLibrarySecret=cedf6a1af9917f6ac2fd8f7a0f4610b418a72c4ac9557cf2256e4ec2226b2060\n      - ApplicationSetting__TypeLibraryDomain=runir.net\n    networks:\n      - type_library_network\n    depends_on:\n      - mssql\n\n  mssql:\n    image: \"mcr.microsoft.com/mssql/server:2017-CU8-ubuntu\"\n    hostname: 'mssql'\n    container_name: mssql\n    ports:\n      - '127.0.0.1:1433:1433'\n    volumes:\n      - mssql:/var/opt/mssql\n    environment:\n      - ACCEPT_EULA=Y\n      - MSSQL_SA_PASSWORD=P4ssw0rd1\n      - MSSQL_PID=Standard\n    networks:\n      - type_library_network\n    restart: unless-stopped\n\nvolumes:\n  mssql:\n    driver: local\n\nnetworks:\n  type_library_network:\n    driver: bridge\n"))),(0,a.kt)("h2",{id:"etter-installasjon"},"Etter installasjon"),(0,a.kt)("h3",{id:"lag-en-bruker"},"Lag en bruker"),(0,a.kt)("p",null,"Det f\xf8rste du m\xe5 gj\xf8re etter installasjon er \xe5 starte tyle backend, databasen og frontend. Deretter registrerer du en ny\nbruker gjennom frontenden. Etter registrering f\xe5r du beskjed om \xe5 vente p\xe5 en epost, denne kommer aldri, for den ligger\nher: ",(0,a.kt)("inlineCode",{parentName:"p"},"/mimirorg/typelibrary/src/server/TypeLibrary.Api/bin/Debug/net7.0/Data/Mail"),". Her kan det vere lurt \xe5 sortere\netter sist endret slik at den siste eposten du mottok kommer p\xe5 toppen."),(0,a.kt)("p",null,"Deretter logger du inn. Siden der har skjedd noen endringer i tyle backenden i det siste s\xe5 er der noen steg du m\xe5 g\xe5\ngjennom f\xf8r du f\xe5r en fullverdig bruker, disse er avhengig av hvor vi er i prosessen, s\xe5 her er det forel\xf8pig d\xe5rlig med\ndokumentasjon, forh\xe5pentligvis s\xe5 funker det uten noen problem. Problemet du kanskje st\xf8ter p\xe5 er at det ikke eksisterer\nnoe selskap i backend koden din fra f\xf8r, s\xe5 her m\xe5 man koble seg p\xe5 databasen til l\xf8sningen og legge til denne\ninformasjonen, da det ikke blir gjort automatisk lenger."),(0,a.kt)("p",null,"Skriv gjerne inn stegene du m\xe5 gjennom for \xe5 l\xf8se dette problemet n\xe5r/hvis det skjer."),(0,a.kt)("h2",{id:"faq"},"FAQ"),(0,a.kt)("details",null,(0,a.kt)("summary",null,"I have a white screen, what do I do?"),(0,a.kt)("p",null,"This is most often (read always) a result of incorrect environment variables somewhere. Checklist:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Is the frontend set to ",(0,a.kt)("inlineCode",{parentName:"li"},"REACT_APP_SILENT = true"),"?"),(0,a.kt)("li",{parentName:"ul"},"Does your user have a company in the database, and is the secret for this company set in Mimir's ",(0,a.kt)("inlineCode",{parentName:"li"},"appsettings.json"),", e.g., ",(0,a.kt)("inlineCode",{parentName:"li"},'"TypelibrarySecret": "secretHash"'),"?"))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"I can't register, what's happening?"),"If you're not receiving the email, it's because it doesn't get sent when you're running in development mode; the same applies to the account recovery code. The email you should have received can be found in:",(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"/mimirorg/typelibrary/src/server/TypeLibrary.Api/bin/Debug/net7.0/Data/Mail/"))),(0,a.kt)("p",null,"If there are other issues, they most often arise from:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Incorrect environment variables."),(0,a.kt)("li",{parentName:"ul"},"Forgetting to run Tyle's backend.")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"I need to clean up my database, how can I do this?"),(0,a.kt)("h1",{id:"nuclear-option"},"Nuclear option"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"----------------------------------------------------------------------\n--Script som kobler fra alt og alle som er tilkoblet\n--Deretter slettes databasen\nUSE [master];\nDECLARE @kill varchar(8000) = '';\nSELECT @kill = @kill + 'kill ' + CONVERT(varchar(5), session_id) + ';'\nFROM sys.dm_exec_sessions\nWHERE database_id = db_id('TypeLibrary')\nEXEC(@kill);\nDROP DATABASE TypeLibrary\nCREATE Database TypeLibrary\n---------------------------------------------------------------------\n----------------------------------------------------------------------\n--Script som kobler fra alt og alle som er tilkoblet\n--Deretter slettes databasen\nUSE [master];\nDECLARE @kill varchar(8000) = '';\nSELECT @kill = @kill + 'kill ' + CONVERT(varchar(5), session_id) + ';'\nFROM sys.dm_exec_sessions\nWHERE database_id = db_id('MimirorgAuthentication')\nEXEC(@kill);\nDROP DATABASE MimirorgAuthentication\nCREATE Database MimirorgAuthentication\n---------------------------------------------------------------------\n----------------------------------------------------------------------\n--Script som kobler fra alt og alle som er tilkoblet\n--Deretter slettes databasen\nUSE [master];\nDECLARE @kill varchar(8000) = '';\nSELECT @kill = @kill + 'kill ' + CONVERT(varchar(5), session_id) + ';'\nFROM sys.dm_exec_sessions\nWHERE database_id = db_id('ModelBuilder')\nEXEC(@kill);\nDROP DATABASE ModelBuilder\nCREATE Database ModelBuilder\nINSERT INTO [ModelBuilder].[dbo].[CollaborationPartner] VALUES ('Aibel', 'aibel.com', 0, 'rdf.aibel.com');\n---------------------------------------------------------------------\n--USE master\n--GO\n--xp_readerrorlog 0, 1, N'Server is listening on' \n--GO\n")),(0,a.kt)("h1",{id:"typelibrary-database"},"TypeLibrary database"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"----------------------------------------------------------------------\n--Script som kobler fra alt og alle som er tilkoblet\n--Deretter slettes databasen\nUSE [master];\nDECLARE @kill varchar(8000) = '';\nSELECT @kill = @kill + 'kill ' + CONVERT(varchar(5), session_id) + ';'\nFROM sys.dm_exec_sessions\nWHERE database_id = db_id('TypeLibrary')\nEXEC(@kill);\nDROP DATABASE TypeLibrary\nCREATE Database TypeLibrary\n---------------------------------------------------------------------\n----------------------------------------------------------------------\n")),(0,a.kt)("h1",{id:"mimirorgauthentication-database"},"MimirorgAuthentication database"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"---------------------------------------------------------------------\n----------------------------------------------------------------------\n--Script som kobler fra alt og alle som er tilkoblet\n--Deretter slettes databasen\nUSE [master];\nDECLARE @kill varchar(8000) = '';\nSELECT @kill = @kill + 'kill ' + CONVERT(varchar(5), session_id) + ';'\nFROM sys.dm_exec_sessions\nWHERE database_id = db_id('MimirorgAuthentication')\nEXEC(@kill);\nDROP DATABASE MimirorgAuthentication\nCREATE Database MimirorgAuthentication\n---------------------------------------------------------------------\n----------------------------------------------------------------------\n")),(0,a.kt)("h1",{id:"modelbuilder-database"},"ModelBuilder database"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"---------------------------------------------------------------------\n----------------------------------------------------------------------\n--Script som kobler fra alt og alle som er tilkoblet\n--Deretter slettes databasen\nUSE [master];\nDECLARE @kill varchar(8000) = '';\nSELECT @kill = @kill + 'kill ' + CONVERT(varchar(5), session_id) + ';'\nFROM sys.dm_exec_sessions\nWHERE database_id = db_id('ModelBuilder')\nEXEC(@kill);\nDROP DATABASE ModelBuilder\nCREATE Database ModelBuilder\nINSERT INTO [ModelBuilder].[dbo].[CollaborationPartner] VALUES ('Aibel', 'aibel.com', 0, 'rdf.aibel.com');\n---------------------------------------------------------------------\n--USE master\n--GO\n--xp_readerrorlog 0, 1, N'Server is listening on' \n--GO\n"))))}c.isMDXComponent=!0}}]);